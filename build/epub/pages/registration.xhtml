<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>Registration</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="registration">
<h1>Registration</h1>
<p>Process description of the eBox registration process</p>
<div class="section" id="user-flow">
<h2>User flow</h2>
<div class="section" id="user-redirect">
<h3>User redirect</h3>
<p>When a user decides to register for the eBox, the HIP must redirect him to the registration endpoint at <code class="docutils literal notranslate"><span class="pre">https://secure.doccle.be/kbc-ebox/register</span></code> with the following query string parameters:</p>
<ul class="simple">
<li><p><strong>returnUrl</strong>: After registration, the user will be sent back to your platform via this url</p></li>
<li><p><strong>reference</strong>: An identifier of the user in your system. This is can be used to link machine to machine messages to the correct user in your system.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The return URL and reference must be url-safe encoded.</p>
</div>
</div>
<div class="section" id="example">
<h3>Example</h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>https://secure.doccle.be/kbc-ebox/register?returnUrl=https%3A%2F%2Fwww.yourdomain.be%2FEboxRegistrationCompleted&amp;reference=XYZ
</pre></div>
</div>
</div>
<div class="section" id="fas-log-on-and-consent-page">
<h3>FAS log on and Consent Page</h3>
<p>The user will start registration process at the FAS. He will log in using any of the provided authentication methods: itsme, eID, â€¦</p>
<p>After authentication, the user agrees with the terms and conditions on the consent page. Note that the language of the FAS login page and consent page cannot be controlled by the eBox connector (not supported by FAS).</p>
</div>
<div class="section" id="after-registration">
<h3>After registration</h3>
<p>The user will be redirected back to the returnUrl you provided. The eBox connector will add a query string parameter with the result of the registration process:</p>
<ul class="simple">
<li><p><strong>status</strong>: Reflects the outcome of the eBox registration process. Is always present and will have one these values: <code class="docutils literal notranslate"><span class="pre">ok</span></code>, <code class="docutils literal notranslate"><span class="pre">cancelled</span></code> or <code class="docutils literal notranslate"><span class="pre">failed</span></code>.</p></li>
<li><p><strong>errorId</strong>: a reference to the error that occured. Is only present when the status <code class="docutils literal notranslate"><span class="pre">failed</span></code>. This can be used for debugging and error root cause analysis.</p></li>
</ul>
</div>
</div>
<div class="section" id="backend-flow">
<h2>Backend flow</h2>
<p>After a succesfull registration, the eBox connector will:</p>
<ul class="simple">
<li><p>synchronize document metadata between the Doccle receiver and eBox of the user</p></li>
<li><p>post a <code class="docutils literal notranslate"><span class="pre">registration</span> <span class="pre">completed</span></code> event to your event api.</p></li>
</ul>
<p>The body of the post request is formatted as a JSON string and contains:</p>
<ul class="simple">
<li><p>technicalSenderName</p></li>
<li><p>receiverExternalReferenceId</p></li>
<li><p>eventTimestamp</p></li>
<li><p>citizenId</p></li>
<li><p>eventType (<code class="docutils literal notranslate"><span class="pre">registration</span> <span class="pre">completed</span></code>)</p></li>
<li><p>reference</p></li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>